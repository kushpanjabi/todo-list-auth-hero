(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,a){e.exports=a(37)},28:function(e,t,a){},30:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),s=(a(28),a(2)),l=a.n(s),u=a(6),i=a(4),m=(a(30),a(10)),d=a(1),p=a(9),h=(a(31),function(e){var t=e.setTodosChange,a=Object(n.useState)(""),o=Object(i.a)(a,2),c=o[0],s=o[1],m=function(){var e=Object(u.a)(l.a.mark((function e(a){var n,r,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,(n=new Headers).append("Content-Type","application/json"),n.append("token",localStorage.token),r={description:c},e.next=8,fetch("http://localhost:5000/dashboard/todos",{method:"POST",headers:n,body:JSON.stringify(r)});case 8:return o=e.sent,e.next=11,o.json();case 11:u=e.sent,console.log(u),t(!0),s(""),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center my-5"},"Input Todo"),r.a.createElement("form",{className:"d-flex",onSubmit:m},r.a.createElement("input",{type:"text",placeholder:"add todo",className:"form-control",value:c,onChange:function(e){return s(e.target.value)}}),r.a.createElement("button",{className:"btn btn-success"},"Add")))}),f=function(e){var t=e.todo,a=e.setTodosChange,o=Object(n.useState)(t.description),c=Object(i.a)(o,2),s=c[0],m=c[1],d=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,r={description:s},(o=new Headers).append("Content-Type","application/json"),o.append("token",localStorage.token),e.next=8,fetch("http://localhost:5000/dashboard/todos/".concat(t.todo_id),{method:"PUT",headers:o,body:JSON.stringify(r)});case 8:a(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-warning","data-toggle":"modal","data-target":"#id".concat(t.todo_id)},"Edit"),r.a.createElement("div",{className:"modal",id:"id".concat(t.todo_id),onClick:function(){return m(t.description)}},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Edit Todo"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:function(){return m(t.description)}},"\xd7")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("input",{type:"text",className:"form-control",value:s,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-warning","data-dismiss":"modal",onClick:function(e){return d(e)}},"Edit"),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return m(t.description)}},"Close"))))))},b=function(e){var t=e.allTodos,a=e.setTodosChange;console.log(t);var o=Object(n.useState)([t]),c=Object(i.a)(o,2),s=c[0],m=c[1];function d(){return(d=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/dashboard/todos/".concat(t),{method:"DELETE",headers:{token:localStorage.token}});case 3:m(s.filter((function(e){return e.todo_id!==t}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){m(t)}),[t]),console.log(s),r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table mt-5"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Description"),r.a.createElement("th",{scope:"col"},"Edit"),r.a.createElement("th",{scope:"col"},"Delete"))),r.a.createElement("tbody",null,0!==s.length&&null!==s[0].todo_id&&s.map((function(e){return r.a.createElement("tr",{key:e.todo_id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,r.a.createElement(f,{todo:e,setTodosChange:a})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return function(e){return d.apply(this,arguments)}(e.todo_id)}},"Delete")))})))))},E=function(e){var t=e.setAuth,a=Object(n.useState)(""),o=Object(i.a)(a,2),c=o[0],s=o[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),f=d[0],E=d[1],g=Object(n.useState)(!1),v=Object(i.a)(g,2),y=v[0],j=v[1];function O(){return(O=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,E(a),s(a[0].user_name),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){O.apply(this,arguments)}(),j(!1)}),[y]),r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex mt-5 justify-content-around"},r.a.createElement("h2",null,"Hello ",c,"!"),r.a.createElement("button",{className:"btn btn-primary",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),p.a.success("Logged out successfully")}(e)}},"Logout")),r.a.createElement(h,{setTodosChange:j}),r.a.createElement(b,{allTodos:f,setTodosChange:j}))},g=a(14),v=a(15),y=function(e){var t=e.setAuth,a=Object(n.useState)({email:"",password:""}),o=Object(i.a)(a,2),c=o[0],s=o[1],d=c.email,h=c.password,f=function(e){s(Object(v.a)(Object(v.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))},b=function(){var e=Object(u.a)(l.a.mark((function e(a){var n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:d,password:h},e.next=5,fetch("http://localhost:5000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:(o=e.sent).token?(localStorage.setItem("token",o.token),t(!0),p.a.success("Logged in!")):(t(!1),p.a.error(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center my-5"},"Login"),r.a.createElement("form",{onSubmit:b},r.a.createElement("input",{type:"email",name:"email",placeholder:"email",className:"form-control my-3",value:d,onChange:function(e){return f(e)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",className:"form-control my-3",value:h,onChange:function(e){return f(e)}}),r.a.createElement("button",{className:"btn btn-success btn-block"},"Submit")),r.a.createElement(m.b,{to:"/register"},"Register"))},j=function(e){var t=e.setAuth,a=Object(n.useState)({email:"",password:"",name:""}),o=Object(i.a)(a,2),c=o[0],s=o[1],d=c.email,h=c.password,f=c.name,b=function(e){return s(Object(v.a)(Object(v.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))},E=function(){var e=Object(u.a)(l.a.mark((function e(a){var n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:d,password:h,name:f},e.next=5,fetch("http://localhost:5000/auth/register",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:(o=e.sent).token?(localStorage.setItem("token",o.token),t(!0),p.a.success("Registered successfully")):(t(!1),p.a.error(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center my-5"},"Register"),r.a.createElement("form",{onSubmit:E},r.a.createElement("input",{type:"email",name:"email",placeholder:"email",className:"form-control my-3",value:d,onChange:function(e){return b(e)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",className:"form-control my-3",value:h,onChange:function(e){return b(e)}}),r.a.createElement("input",{type:"text",name:"name",placeholder:"name",className:"form-control my-3",value:f,onChange:function(e){return b(e)}}),r.a.createElement("button",{className:"btn btn-success btn-block"},"Sign up")),r.a.createElement(m.b,{to:"/login"},"Login"))},O=function(){return r.a.createElement("div",{className:"jumbotron mt-5"},r.a.createElement("h1",null,"Welcome to Todo City."),r.a.createElement("p",null,"Sign In and start building your todolist"),r.a.createElement(m.b,{to:"/login",className:"btn btn-primary"},"Login"),r.a.createElement(m.b,{to:"/register",className:"btn btn-primary ml-3"},"Sign up"))};p.a.configure();var k=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1],c=function(e){o(e)};function s(){return(s=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/auth/is-verify",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,o(!0===a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement(m.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",render:function(e){return a?r.a.createElement(d.a,{to:"/dashboard"}):r.a.createElement(O,e)}}),r.a.createElement(d.b,{exact:!0,path:"/login",render:function(e){return a?r.a.createElement(d.a,{to:"/dashboard"}):r.a.createElement(y,Object.assign({},e,{setAuth:c}))}}),r.a.createElement(d.b,{exact:!0,path:"/register",render:function(e){return a?r.a.createElement(d.a,{to:"/login"}):r.a.createElement(j,Object.assign({},e,{setAuth:c}))}}),r.a.createElement(d.b,{exact:!0,path:"/dashboard",render:function(e){return a?r.a.createElement(E,Object.assign({},e,{setAuth:c})):r.a.createElement(d.a,{to:"/login"})}})))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.afa47d13.chunk.js.map